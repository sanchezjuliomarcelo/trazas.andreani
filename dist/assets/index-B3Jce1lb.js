(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const d="tiendasdigitalessrl_gla",u="[e]Xn1Y80iq9",i="https://apis.andreani.com";async function p(){const o=btoa(`${d}:${u}`),s=new Headers;s.append("Content-Type","application/json"),s.append("Authorization",`Basic ${o}`);const e={method:"POST",headers:s,redirect:"follow"},t=`${i}/login`;try{const a=await fetch(t,e);if(!a.ok)throw new Error(`Error: ${a.statusText}`);const l=await a.json();localStorage.setItem("authToken",l.token)}catch(a){console.error("Error al obtener el token:",a)}}async function c(n){const r=localStorage.getItem("authToken");if(!r){alert("No se ha obtenido el token. Intenta recargar la página.");return}const o=new Headers;o.append("x-authorization-token",r);const s={method:"GET",headers:o,redirect:"follow"},e=`${i}/v2/envios/${n}/trazas`;try{const t=await fetch(e,s);if(!t.ok)throw new Error(`Error: ${t.statusText}`);const a=await t.json();f(a)}catch(t){console.error("Error al obtener la traza:",t)}}function f(n){const r=document.getElementById("infonumeroAndreani");r.innerHTML="",n&&n.eventos&&n.eventos.length>0?n.eventos.forEach(o=>{const s=document.createElement("div");s.className="alert alert-info",s.innerHTML=`
                <h4 class="alert-heading">${o.Fecha}</h4>
                <p><strong>Estado:</strong> ${o.Estado||"N/A"}</p>
                <p><strong>Traducción:</strong> ${o.Traduccion||"N/A"}</p>
                <p><strong>Sucursal:</strong> ${o.Sucursal||"N/A"}</p>
                <p><strong>Ciclo:</strong> ${o.Ciclo||"N/A"}</p>
                <p><strong>Comentario:</strong> ${o.Comentario||"N/A"}</p>
            `,r.appendChild(s)}):r.innerHTML="<p>No se encontraron eventos.</p>"}window.addEventListener("load",async()=>{await p();const n=new URLSearchParams(window.location.search).get("trackingNumber");n&&await c(n)});document.getElementById("numeroAndreaniForm").addEventListener("submit",async function(n){n.preventDefault();const r=document.getElementById("numeroAndreani").value;r?await c(r):alert("Por favor, ingrese un número de seguimiento.")});
