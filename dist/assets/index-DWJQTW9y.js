(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const i="tiendasdigitalessrl_gla",c="[e]Xn1Y80iq9",l="https://apis.andreani.com";async function d(){const n=btoa(`${i}:${c}`),r=new Headers;r.append("Authorization",`Basic ${n}`),r.append("Cookie","3c8ffdab67adef53a700e68f6019dc1d=46c0da942d265b8e7bb263570371139b");const o={method:"GET",headers:r,redirect:"follow"},s=`${l}/login`;try{const e=await fetch(s,o);if(!e.ok)throw new Error(`Error: ${e.statusText}`);const t=await e.json();console.log("Token generado:",t.token),localStorage.setItem("authToken",t.token)}catch(e){console.error("Error al obtener el token:",e)}}async function u(n){const r=localStorage.getItem("authToken");if(!r){alert("No se ha obtenido el token. Inicie sesión primero.");return}const o=`/api/v2/envios/${n}/trazas`,s=new Headers;s.append("Authorization",`Bearer ${r}`);const e={method:"GET",headers:s,redirect:"follow"};try{const t=await fetch(o,e);if(!t.ok)throw new Error(`Error: ${t.statusText}`);const a=await t.json();f(a)}catch(t){console.error("Error al obtener la traza:",t)}}function f(n){const r=document.getElementById("infonumeroAndreani");r.innerHTML="",n&&n.eventos&&n.eventos.length>0?n.eventos.forEach(o=>{const s=document.createElement("div");s.className="alert alert-info",s.innerHTML=`
                <h4 class="alert-heading">${o.Fecha}</h4>
                <p><strong>Estado:</strong> ${o.Estado||"N/A"}</p>
                <p><strong>Traducción:</strong> ${o.Traduccion||"N/A"}</p>
                <p><strong>Sucursal:</strong> ${o.Sucursal||"N/A"}</p>
                <p><strong>Ciclo:</strong> ${o.Ciclo||"N/A"}</p>
                <p><strong>Comentario:</strong> ${o.Comentario||"N/A"}</p>
            `,r.appendChild(s)}):r.innerHTML="<p>No se encontraron eventos.</p>"}document.getElementById("numeroAndreaniForm").addEventListener("submit",async function(n){n.preventDefault();const r=document.getElementById("numeroAndreani").value;r?await u(r):alert("Por favor, ingrese un número de seguimiento.")});window.addEventListener("load",d);
